<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Teacher Dashboard</title>

    <style>
        body {
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0d1117;
            color: #e6edf3;
        }
        .navbar {
            display: flex;
            background: #161b22;
            padding: 1rem 2rem;
            border-bottom: 1px solid #30363d;
            align-items: center;
            box-shadow: 0 1px 5px rgba(0,0,0,0.4);
        }
        .navbar-title {
            font-weight: bold;
            font-size: 1.25rem;
            margin-right: 2rem;
            color: #58a6ff;
            letter-spacing: 0.5px;
        }
        .navbar ul {
            list-style: none;
            display: flex;
            gap: 2rem;
            margin: 0;
            padding: 0;
        }
        .navbar ul li {
            cursor: pointer;
            font-weight: 500;
            color: #c9d1d9;
        }
        .navbar ul li.active {
            color: #58a6ff;
            font-weight: 600;
        }
        .navbar .add-btn {
            margin-left: auto;
            background-color: #238636;
            color: white;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            text-decoration: none;
            transition: background-color 0.3s;
        }
        .navbar .add-btn:hover {
            background-color: #2ea043;
        }
        .layout {
            display: flex;
            height: calc(100vh - 64px); /* subtract navbar height */
        }
        aside {
            width: 220px;
            background-color: #161b22;
            padding: 2rem 1rem;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.4);
        }
        aside h3 {
            color: #58a6ff;
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }
        aside button {
            display: block;
            width: 100%;
            margin-bottom: 1rem;
            padding: 0.6rem;
            background: none;
            border: 1px solid #30363d;
            border-radius: 6px;
            color: #c9d1d9;
            cursor: pointer;
            font-size: 0.95rem;
            transition: background 0.3s;
        }
        aside button:hover {
            background-color: #21262d;
        }
        main {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
        }
        h2 {
            color: #e6edf3;
            margin-bottom: 1rem;
        }
        .overview-boxes {
            display: flex;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        .box {
            background-color: #161b22;
            padding: 1.5rem;
            border-radius: 10px;
            flex: 1;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }
        .box h3 {
            color: #8b949e;
            margin-bottom: 0.5rem;
        }
        .box p {
            font-size: 1.4rem;
            font-weight: bold;
        }
        .diagram img {
            width: 100%;
            border-radius: 8px;
        }
        section {
            display: none;
        }
        section.active {
            display: block;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background-color: #161b22;
            border-radius: 10px;
            overflow: hidden;
        }
        th, td {
            padding: 0.75rem;
            border-bottom: 1px solid #30363d;
            text-align: left;
        }
        th {
            color: #8b949e;
        }
        td {
            color: #c9d1d9;
        }
        input[type="number"], select {
            width: 100%;
            padding: 0.4rem;
            border-radius: 4px;
            border: none;
        }
        button.primary {
            background-color: #238636;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            margin: 1rem 0;
        }
        input[type="number"], select {
            width: 100%;
            padding: 0.4rem;
            border-radius: 4px;
            border: none;
        }

        .status-toggle {
            width: 20px;
            height: 20px;
            accent-color: green;
        }

        .status-toggle.red {
            accent-color: red;
        }
    </style>




</head>
<body>
<div class="navbar">
    <div class="navbar-title">Dashboard</div>
    <ul>
        <li class="active">Courses</li>
        <li>Messages</li>
        <li>Forums</li>
    </ul>
    <a class="add-btn" th:href="@{/courses/add}">Add New Course</a>
</div>
<div class="layout">
    <aside>
        <h3>Teacher Menu</h3>
        <button onclick="showSection('overview')">Dashboard Overview</button>
        <button onclick="showSection('courses')">Courses</button>
        <button onclick="showSection('grades')">Grade Entry</button>
        <button onclick="showSection('attendance')">Attendance</button>
        <button onclick="logout()">Logout</button>
    </aside>
    <main>
        <section id="overview" class="active">
            <h2>Dashboard Overview</h2>
            <div class="overview-boxes">
                <div class="box">
                    <h3>Total Students</h3>
                    <p>120</p>
                </div>
                <div class="box">
                    <h3>Total Courses</h3>
                    <p>5</p>
                </div>
                <div class="box">
                    <h3>Average Grade</h3>
                    <p>84%</p>
                </div>
            </div>
            <div class="diagram">
                <img src="https://via.placeholder.com/600x250?text=Course+Progress+Diagram" alt="Diagram Placeholder">
            </div>
        </section>

        <section id="courses">
            <h2>Course Management</h2>
            <a class="primary" th:href="@{/courses/add}">+ Add Course</a>

            <select id="courseSelect" onchange="filterCourses()">
                <option value="">-- Select a course --</option>
                <option th:each="course : ${courses}" th:value="${course.id}" th:text="${course.name}"></option>
            </select>

            <div id="courseStudents" style="margin-top:1rem; display:none">
                <h3>Enrolled Students</h3>
                <div class="table-container">
                    <table>
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Teacher</th>
                            <th>Enrolled</th>
                            <th>Actions</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="course : ${courses}" th:if="${course.id} == ${selectedCourseId}">
                            <td th:text="${course.id}"></td>
                            <td>
                                <a class="view-link" th:href="@{/courses/{id}/students(id=${course.id})}"
                                   th:text="${course.name}"></a>
                            </td>
                            <td th:text="${course.description}"></td>
                            <td th:text="${course.teacher.firstName + ' ' + course.teacher.lastName}"></td>
                            <td th:text="${course.enrolledStudents.size()}"></td>
                            <td>
                                <a class="edit-link" th:href="@{/courses/{id}/edit(id=${course.id})}">Edit</a>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <script>
            function filterCourses() {
                const selectedId = document.getElementById("courseSelect").value;
                const container = document.getElementById("courseStudents");
                if (selectedId) {
                    window.location.href = `/courses?selectedCourseId=${selectedId}`;
                } else {
                    container.style.display = 'none';
                }
            }
        </script>

        <section id="grades">
            <h2>Grade Entry</h2>
            <select id="gradeCourseSelect" onchange="displayGradeForm()">
                <option value="">-- Select a course --</option>
                <option value="math">Math 101</option>
                <option value="physics">Physics 202</option>
            </select>
            <div id="gradeForm" style="margin-top:1rem; display:none">
                <table>
                    <tr>
                        <th>Student</th><th>Midterm</th><th>Final</th><th>Quizzes</th><th>Assignments</th><th>Project</th><th>Attendance</th><th>Finished</th>
                    </tr>
                    <tr>
                        <td>John Doe</td>
                        <td><input type="number"></td>
                        <td><input type="number"></td>
                        <td><input type="number"></td>
                        <td><input type="number"></td>
                        <td><input type="number"></td>
                        <td><input type="number"></td>
                        <td><input type="checkbox"></td>
                    </tr>
                </table>
            </div>
        </section>

        <section id="attendance">
            <h2>Attendance Entry</h2>
            <table>
                <thead>
                <tr>
                    <th>Student ID</th>
                    <th>Student Name</th>
                    <th>Date</th>
                    <th>Status</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>2021001</td>
                    <td>Sarah Ali</td>
                    <td class="date">2025-05-15</td>
                    <td>
                        <input type="checkbox"
                               checked
                               onchange="toggleStatusColor(this)"
                               class="status-toggle">
                    </td>
                </tr>
                <tr>
                    <td>2021002</td>
                    <td>Omar Khalid</td>
                    <td class="date">2025-05-15</td>
                    <td>
                        <input type="checkbox"
                               checked
                               onchange="toggleStatusColor(this)"
                               class="status-toggle">
                    </td>
                </tr>
                <tr th:each="record : ${attendanceList}">
                    <td th:text="${record.studentId}"></td>
                    <td th:text="${record.studentName}"></td>
                    <td class="date" th:text="${record.date}"></td>
                    <td>
                        <input type="checkbox"
                               th:checked="${record.status == 'Present'}"
                               onchange="toggleStatusColor(this)"
                               class="status-toggle">
                    </td>
                </tr>

                </tbody>
            </table>
        </section>
    </main>
</div>
<script>
    function showSection(id) {
        document.querySelectorAll('main section').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }
    function displayCourseStudents() {
        const select = document.getElementById('courseSelect');
        document.getElementById('courseStudents').style.display = select.value === "" ? 'none' : 'block';
    }
    function displayGradeForm() {
        const select = document.getElementById('gradeCourseSelect');
        document.getElementById('gradeForm').style.display = select.value === "" ? 'none' : 'block';
    }
    function logout() {
        alert("Logging out...");
    }
</script>

<script>
    function toggleStatusColor(checkbox) {
        if (checkbox.checked) {
            checkbox.classList.remove('red');
        } else {
            checkbox.classList.add('red');
        }
    }
</script>

</body>
</html>
